# SIP客户端打包说明

本文档介绍如何将SIP客户端打包成可执行文件(.exe)，以便在没有Python环境的计算机上运行。

## 打包前准备

1. 确保您已安装Python 3.6或更高版本
2. 确保项目代码完整，包含以下目录结构：
   - `core/` - 包含SIP通信核心功能
   - `gui/` - 包含UI相关组件
   - `utils/` - 包含工具类
   - `main.py` - 程序入口点
   - `sip_client.py` - 主客户端类
   - `sip_client_config.json` - 配置文件

3. 确保当前目录中有`pjsua.exe`文件(SIP协议实现)
   - 如果没有，您可以在运行程序时通过设置面板下载

## 打包步骤

1. 运行打包脚本：
   ```
   python build.py
   ```

2. 脚本将执行以下操作：
   - 检查并安装必要的依赖库
   - 安装PyInstaller(如果尚未安装)
   - 清理旧的构建文件
   - 使用PyInstaller打包应用程序
   - 在dist目录中生成SIPClient.exe文件

3. 打包完成后，您可以在`dist`目录中找到`SIPClient.exe`文件

## 注意事项

1. 打包过程需要有网络连接以安装必要的依赖
2. 打包过程可能需要几分钟时间，请耐心等待
3. 打包后的exe文件比较大(约20-30MB)，这是正常的，因为它包含了Python解释器和所有依赖库
4. 如果您的系统中有杀毒软件，可能会误报PyInstaller打包的程序，这是因为PyInstaller是打包工具的通用特性，不是病毒

## 分发应用程序

打包完成后，您只需分发`dist`目录中的`SIPClient.exe`文件即可。用户不需要安装Python或任何其他依赖即可运行程序。

## 常见问题

1. **问题**：打包失败，提示"找不到模块"
   **解决方法**：检查是否安装了所有依赖库，或者修改`build.py`中的`hidden_imports`列表添加缺失的模块

2. **问题**：打包的程序运行时提示"找不到pjsua.exe"
   **解决方法**：确保打包前当前目录中有`pjsua.exe`文件，或者用户可以在程序设置中手动设置路径

3. **问题**：打包的程序启动很慢
   **解决方法**：这是正常现象，因为需要解压缩所有内嵌的文件，第一次启动会比较慢

4. **问题**：Windows提示安全警告
   **解决方法**：这是因为程序没有数字签名，可以选择"仍然运行" 